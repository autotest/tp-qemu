- nvdimm:
    type = nvdimm
    slots_mem = 4
    maxmem_mem = 32G
    vm_mem_limit = 30G
    kill_vm_on_error = yes
    login_timeout = 240
    only x86_64
    no Windows
    no RHEL.6 RHEL.5 RHEL.4 RHEL.3
    no RHEL.7.2 RHEL.7.1 RHEL.7.0
    no Host_RHEL.m5
    no Host_RHEL.m6
    no Host_RHEL.m7.u0, Host_RHEL.m7.u1, Host_RHEL.m7.u2
    machine_type_extra_params = "nvdimm=on"
    backend_mem = memory-backend-file
    nv_backend = /tmp/nvdimm0
    mem-path = ${nv_backend}
    mount_dir = "/mnt"
    pre_command = "dd if=/dev/zero of=${nv_backend} bs=1M count=1024"
    dev_path = /dev/pmem0
    format_command = "mkfs.xfs -f ${dev_path}"
    RHEL.8:
        format_command += " -m reflink=0"
    mount_command = "mount -o dax ${dev_path} ${mount_dir}"
    post_command = "rm -rf ${nv_backend}"
    mem_devs = mem1
    size_mem = 1G
    share_mem = on
    nv_file = "${mount_dir}/nv0"

    variants:
        - nvdimm_basic:
        - nvdimm_emulate:
            # Please update host kernel line first, such as add "memmap=1G!5G":
            # 1G is the size, 5G is the start address of host memory
            start_vm = "no"
            nv_backend = "/dev/pmem0"
            mem-path = ${nv_backend}
            del pre_command
            del post_command
            variants:
                - @pmem_default:
                - pmem_on:
                    pmem_mem = on
        - nvdimm_dax:
            start_vm = "no"
            nvdimm_dax = "yes"
            nv_backend = "/dev/dax0.0"
            mem-path = ${nv_backend}
            del pre_command
            del post_command
            ndctl_install_cmd = "rpm -q ndctl || yum install -y ndctl"
            create_dax_cmd = "ndctl create-namespace -m dax -e namespace0.0 -f -v -a 4096"
            del_dax_cmd = "ndctl create-namespace -m memory -e namespace0.0 -f -v -a 4096"
