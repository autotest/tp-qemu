- migration_with_plug_block:
    only virtio_scsi, virtio_blk
    virt_test_type = qemu
    type = migration_with_plug_block
    images += " stg0"
    image_name_stg0 = images/storage0
    blk_extra_params_stg0 = "serial=TARGET_DISK0"
    remove_image_stg0 = yes
    force_create_image_stg0 = yes
    kill_vm_on_error = yes
    iozone_timeout= 3600
    virtio_blk:
        drive_pci_addr_stg0 = 9
        Windows:
            driver_name = viostor
    virtio_scsi:
        bus_extra_params_stg0 = 'addr=0x0b'
        drive_scsiid_stg0 = 5
        drive_lun_stg0 = 10
        blk_extra_params_stg0 += ',channel=0'
        Windows:
            driver_name = vioscsi
    Windows:
        iozone_options = '-az -b C:\{0}_stress_test -g 1G -y 32k -i 0 -i 1 -f {0}:\iozone_test'
    Linux:
        iozone_options = '-az -g 1G -y 32k -i 0 -i 1 -f {0}/iozone_test'
    variants:
        - after_hotplug:
            hotplug = yes
            do_stress_io = yes
            boot_drive_stg0 = no
        - after_unplug:
            do_ping_pong = yes
            ping_pong_times = 10
            migrate_inner_funcs = [('postcopy', 70)]
            migrate_capabilities = "{'postcopy-ram': 'on'}"
            boot_drive_stg0 = yes
        - hotplug_unplug_system_reset:
            hotplug = yes
            unplug_after_hotplug = 'yes'
            do_system_reset = yes
            boot_drive_stg0 = no
        - unplug_systrem_reset:
            do_system_reset = yes
            boot_drive_stg0 = yes
