- driver_load: install setup image_copy unattended_install.cdrom
    type = driver_load
    kill_vm_on_error = yes
    login_timeout = 240
    repeats = 1
    variants:
        - with_nic:
            no e1000
            nics += " nic2"
            nic_model_nic2 = rtl8139
            nic_model_nic1 = virtio
            Linux:
                driver_load_cmd = modprobe DRIVER_ID
                driver_unload_cmd = modprobe -r DRIVER_ID
                driver_id_cmd = lsmod |grep virtio_net
                driver_id_pattern = virtio_net
                test_after_load = file_transfer
                filesize = 100
                transfer_timeout = 1000
            Windows:
                # The DevCon utility is a command-line utility that acts as an
                # alternative to Device Manager. Please set up your windows guest
                # following: http://support.microsoft.com/kb/311272/en-us
                driver_id_cmd = C:\devcon.exe find * | find "VirtIO Ethernet Adapter"
                driver_id_pattern = "(.*?):"
                driver_load_cmd = C:\devcon.exe enable @DRIVER_ID
                driver_unload_cmd = C:\devcon.exe disable @DRIVER_ID
                x86_64:
                    devcon = "xcopy %s:\devcon\wnet_amd64\devcon.exe C: /Y"
                i386:
                    devcon = "xcopy %s:\devcon\wnet_x86\devcon.exe C: /Y"

        - with_balloon:
            balloon = balloon0
            balloon_dev_devid = balloon0
            balloon_dev_add_bus = yes
            Linux:
                driver_load_cmd = modprobe DRIVER_ID
                driver_unload_cmd = modprobe -r DRIVER_ID
                driver_id_cmd = lsmod |grep virtio_balloon
                driver_id_pattern = virtio_balloon
            Windows:
                driver_id_cmd = C:\devcon.exe find * | find "VirtIO Balloon Driver"
                driver_id_pattern = "(.*?):"
                driver_load_cmd = C:\devcon.exe enable @DRIVER_ID
                driver_unload_cmd = C:\devcon.exe disable @DRIVER_ID
                x86_64:
                    devcon = "xcopy %s:\devcon\wnet_amd64\devcon.exe C: /Y"
                i386:
                    devcon = "xcopy %s:\devcon\wnet_x86\devcon.exe C: /Y"

        - with_viorng:
            no_virtio_rng:
                virtio_rngs += " rng0"
                backend_rng0 = rng-random
                backend_type = passthrough
                filename_passthrough = /dev/urandom
            Linux:
                driver_load_cmd = modprobe DRIVER_ID
                driver_unload_cmd = modprobe -r DRIVER_ID
                driver_id_cmd = lsmod |grep virtio_rng
                driver_id_pattern = virtio_rng
            Windows:
                driver_id_cmd = C:\devcon.exe find * | find "VirtIO RNG Device"
                driver_id_pattern = "(.*?):"
                driver_load_cmd = C:\devcon.exe enable @DRIVER_ID
                driver_unload_cmd = C:\devcon.exe disable @DRIVER_ID
                x86_64:
                    devcon = "xcopy %s:\devcon\wnet_amd64\devcon.exe C: /Y"
                i386:
                    devcon = "xcopy %s:\devcon\wnet_x86\devcon.exe C: /Y"

        - with_block:
            drive_format_image1 = ide
            images += " stg"
            image_name_stg = "images/storage"
            image_size_stg = 4G
            drive_format_stg = virtio
            Linux:
                driver_load_cmd = modprobe DRIVER_ID
                driver_unload_cmd = modprobe -r DRIVER_ID
                driver_id_cmd = lsmod |grep virtio_blk
                driver_id_pattern = virtio_blk
            Windows:
                driver_id_cmd = C:\devcon.exe find * | find "VirtIO SCSI Disk Device"
                driver_id_pattern = "(.*?):"
                driver_load_cmd = C:\devcon.exe enable @DRIVER_ID
                driver_unload_cmd = C:\devcon.exe disable @DRIVER_ID
                x86_64:
                    devcon = "xcopy %s:\devcon\wnet_amd64\devcon.exe C: /Y"
                i386:
                    devcon = "xcopy %s:\devcon\wnet_x86\devcon.exe C: /Y"

        -with_vioscsi:
            cd_format_fixed =ide
            drive_format_image1 = ide
            images += " stg"
            image_name_stg = "images/storage"
            image_size_stg = 4G
            drive_format_stg = scsi-hd
            Linux:
                driver_load_cmd = modprobe DRIVER_ID
                driver_unload_cmd = modprobe -r DRIVER_ID
                driver_id_cmd = lsmod |grep virtio_scsi
                driver_id_pattern = virtio_scsi
            Windows:
                driver_id_cmd = C:\devcon.exe find * | find "VirtIO SCSI pass-through controller"
                driver_id_pattern = "(.*?):"
                driver_load_cmd = C:\devcon.exe enable @DRIVER_ID
                driver_unload_cmd = C:\devcon.exe disable @DRIVER_ID
                x86_64:
                    devcon = "xcopy %s:\devcon\wnet_amd64\devcon.exe C: /Y"
                i386:
                    devcon = "xcopy %s:\devcon\wnet_x86\devcon.exe C: /Y"

        -with_vioserial: 
            driver_name = vioser
            virtio_ports = "vs"
            virtio_port_type = serialport
            Linux:
                driver_load_cmd = modprobe DRIVER_ID
                driver_unload_cmd = modprobe -r DRIVER_ID
                driver_id_cmd = lsmod |grep virtio_console
                driver_id_pattern = virtio_console
            Windows:
                driver_id_cmd = C:\devcon.exe find * | find "VirtIO-Serial Driver"
                driver_id_pattern = "(.*?):"
                driver_load_cmd = C:\devcon.exe enable @DRIVER_ID
                driver_unload_cmd = C:\devcon.exe disable @DRIVER_ID
                x86_64:
                    devcon = "xcopy %s:\devcon\wnet_amd64\devcon.exe C: /Y"
                i386:
                    devcon = "xcopy %s:\devcon\wnet_x86\devcon.exe C: /Y"

