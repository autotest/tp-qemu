- netkvm_buffer_shortage:
    virt_test_type = qemu
    type = netkvm_buffer_shortage
    only Windows
    only virtio_net
    vhost = on
    timeout = 360
    cdroms += " virtio"
    vms += " vm2"
    image_snapshot = yes
    start_vm = yes
    start_vm_vm2 = no
    smp = 2
    queues = ${smp}
    vectors = 1024
    copy_dest = "C:\"
    dest_location = "pushd ${copy_dest}"
    nic_extra_params_nic1 = ",rx_queue_size=1024,tx_queue_size=256"
    i386:
        psutil_whl = "psutil-6.1.1-cp37-abi3-win32.whl"
    x86_64:
        psutil_whl = "psutil-6.1.1-cp37-abi3-win_amd64.whl"
    s_py = '.\server.py'
    c_py = '.\client.py'
    port_num = 12345
    check_live_python = "tasklist | findstr /i python"
    c_pip_copy_cmd = 'xcopy "WIN_UTILS:\packet_loss_scripts\${psutil_whl}" ${copy_dest}'
    c_pip_cmd = "py -m pip install ${psutil_whl}"
    s_py_copy_cmd = 'xcopy "WIN_UTILS:\packet_loss_scripts\${s_py}" ${copy_dest}'
    s_py_cmd = "start cmd /c py ${s_py} ${port_num}"
    c_py_copy_cmd = 'xcopy "WIN_UTILS:\packet_loss_scripts\${c_py}" ${copy_dest}'
    c_py_cmd = "start cmd /c py ${c_py} 99999 %s ${port_num}"
    param_name = "MinRxBufferPercent"
    param_values = "0 25 50 75 100"
