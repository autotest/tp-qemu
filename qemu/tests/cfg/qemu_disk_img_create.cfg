- qemu_disk_img_create:
    no qed raw vmdk
    type = create_external_snapshot_via_protocol
    kill_vm = yes
    start_vm = no
    md5sum_bin = "md5sum"
    force_create_image = no
    backup_image_before_testing = yes
    restore_image_before_testing = yes
    tmp_dir = /var/tmp
    image_chain = "image1 sn1"
    image_name_sn1 = "images/sn1"
    image_format_sn1 = "qcow2"
    tmp_file_name = ${tmp_dir}/test.img
    guest_file_name_sn1 = "${tmp_dir}/sn1"
    guest_file_name_image1 = "${tmp_dir}/test.img"
    server_name = localhost
    file_create_cmd = "dd if=/dev/urandom of=%s bs=4k count=250"
    Windows:
        md5sum_bin = "C:\\tools\md5sum.exe"
        guest_file_name_sn1 = "c:\sn1.img"
        guest_file_name_image1 = "c:\test.img"
        x86_64:
            sync_bin = WIN_UTILS:\Sync\sync64.exe /accepteula
        i386, i686:
            sync_bin = WIN_UTILS:\Sync\sync.exe /accepteula

    variants:
        - protocol_ssh:
            subcommand = setup_env_for_ssh
            check_image = no
            post_check = no
            image_json_file.driver_sn1 = ssh
            image_json_file.host = ${server_name}
            image_json_file.host_key_check = no
            ssh_key_dir = /root/.ssh
            create_ssh_key_cmd = "ssh-keygen -t rsa -q -N '' -f ${ssh_key_dir}/id_rsa"
            copy_pub_key_cmd = "cat ${ssh_key_dir}/id_rsa.pub > ${ssh_key_dir}/authorized_keys"

        - protocol_https:
            subcommand = setup_env_for_https
            image_json_file.driver_sn1 = https
            image_json_file.url = "https://${server_name}/images/{}"
            image_json_file.sslverify = off
            image_json_file.readahead = 64k
            http_conf_cmd = "mkdir -p /var/www/html/images;"
            http_conf_cmd += "mount -obind  /home/kvm_autotest_root/images /var/www/html/images"
            qemu_command_prefix_sn1 = "unset https_proxy;"
            install_mod_ssl_cmd = yum install mod_ssl -y
            Host_RHEL.m6:
                httpd_start_cmd = "service httpd restart"
                httpd_status_cmd = "service httpd status"
                httpd_status_re = "is running"
            Host_RHEL.m7:
                httpd_start_cmd = "systemctl restart httpd"
                httpd_status_cmd = "systemctl status httpd"
                httpd_status_re = "Active: active (running)"
