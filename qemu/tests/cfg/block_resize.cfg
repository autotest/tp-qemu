- block_resize:
    # As XP and 2003 guest disk manager not support disk shrink. So don't test them for this feature
    no WinXP Win2003
    no RHEL.4
    only qcow2 raw
    type = block_resize
    block_size_cmd = "fdisk -l | grep {0}"
    block_size_pattern = ",\s+(\d+\s+b)ytes"
    disk_change_ratio = "0.5"
    guest_prepare_cmd = ""
    variants:
        - with_system_disk:
            qcow2:
                block_resize_type = "enlarge"
            raw:
                block_resize_type = "enlarge shrink"
            blk_extra_params_image1 = "serial=TARGET_DISK0"
            Host_RHEL.m6..ide:
                blk_extra_params_image1 = "wwn=0x5000123456789abc"
            backup_image_before_testing = yes
            restore_image_after_testing = yes
            Windows:
                accept_ratio = 0.005
                disk_index = 0
                disk_letter = C
                block_size_pattern = "${disk_index}\s+(\d+)"
                block_size_cmd = wmic diskdrive get size, index
        - with_data_disk:
            images += " stg"
            image_size_stg = 10G
            image_name_stg = images/stg
            create_image_stg = yes
            remove_image_stg = yes
            force_create_image_stg = yes
            image_snapshot_image = yes
            blk_extra_params_stg = "serial=TARGET_DISK0"
            Host_RHEL.m6..ide:
                blk_extra_params_stg = "wwn=0x5000123456789abc"
            Windows:
                accept_ratio = 0.005
                block_size_cmd = wmic diskdrive get size, index
                disk_index = 1
                disk_letter = I
                format_disk = yes
                block_size_pattern = "${disk_index}\s+(\d+)"
            variants:
                - fmt_qcow2:
                    image_extra_params = ""
                    image_format_type = qcow2
                    image_format_stg = qcow2
                    block_resize_type = "enlarge"
                - fmt_raw:
                    image_extra_params = ""
                    image_format_type = raw
                    image_format_stg = raw
                    block_resize_type = "enlarge shrink"
    ide:
        # TODO this is bug that ide not support qcow2 format block resize
        # recently. Will remove this line when the bug fixed.
        no qcow2
        need_reboot = yes
    virtio_blk:
        need_reboot = no
        driver_name = viostor
    virtio_scsi:
        need_reboot = no
        driver_name = vioscsi
        Linux:
            guest_prepare_cmd = "echo 1 > /sys/block/sda/device/rescan"
    RHEL.5:
        need_reboot = yes
    variants:
        - @default:
        - data_plane:
            no Host_RHEL.m6
            only virtio_blk virtio_scsi
            iothreads = iothread0
            virtio_blk:
                blk_extra_params_stg += ",iothread=${iothreads}"
            virtio_scsi:
                no Host_RHEL.m7.u0, Host_RHEL.m7.u1, Host_RHEL.m7.u2
                bus_extra_params_stg = "iothread=${iothreads}"
    variants:
        - @default:
        - iozone_test:
            # Here only add windows iozone test part.
            # For linux iozone test, will be developed by other colleague later,
            # When it be finished, will update the code.
            only Windows
            iozone_test = "yes"
            iozone_cmd = "WIN_UTILS:\Iozone\iozone.exe -azR -r 64k -n 1G -g 1G"
            iozone_cmd += " -M -b iozone.xls -f ${disk_letter}:\testfile"
