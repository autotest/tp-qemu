- virtio_win_sock_test:
    only Windows
    clone_master = yes
    master_images_clone = image1
    remove_image_image1 = yes
    cdroms += " virtio"
    virtio_win_media_type = iso
    required_virtio_win_prewhql = [0.1.294, )
    required_virtio_win = [1.9.51.0, )
    vsock_module = vhost_vsock
    driver_name = viosock
    device_name = VirtIO Socket Driver
    test_tool = viosocklib-test.exe
    src_file_path = /tmp/vsock.zip
    dst_file_path = C:\vsock.zip
    generate_file_cmd = dd if=/dev/urandom of=${src_file_path} bs=1M count=100
    md5sum_check_cmd = certutil -hashfile ${dst_file_path} MD5
    vsock_port = 2222
    receive_data_cmd = 'C:\${test_tool} /l ${vsock_port} ${dst_file_path}'
    send_data_cmd = "socat -u FILE:${src_file_path} VSOCK-CONNECT:%s:${vsock_port}"
    variants:
        - hotplug:
            type = vsock_hotplug
            check_vsock_cmd = powershell -command "Get-PnpDevice -Presentonly"
            addr_pattern = '\d\d:\d\d\.\d'
            device_pattern = ${device_name}
            dmesg_check = no
