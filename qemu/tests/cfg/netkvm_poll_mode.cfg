- netkvm_poll_mode:
    type = netkvm_poll_mode
    clone = yes
    backup_image_before_testing = yes
    restore_image_after_testing = yes
    # this case only tested on prewhql255 or higher version
    cdroms += " virtio"
    required_virtio_win_prewhql = [0.1.255, )
    # boot with virtio-net-pci device
    only Win11, Win2025
    only virtio_net
    mq = on
    enable_rss = '"*RSS" 1'
    setup_rss_queues = '"*NumRssQueues" %s'
    check_rss_queues = "*NumRssQueues"
    check_poll_mode = "*NdisPoll"
    keyword = "Poll mode tried and"
    variants:
        - queue4_smp4:
            smp = 4
            queues = ${smp}
            variants:
                - rss_16:
                    rss_queues = 16
                    keyword = "${keyword} enabled"
                - rss_2:
                    rss_queues = 2
                    keyword = "${keyword} disabled"
        - queue4_smp2:
            queues = 4
            smp = 2
            rss_queues = 2
            keyword = "${keyword} enabled"
        - queue32_smp20:
            queues = 32
            smp = 20
            rss_queues = 16
            keyword = "${keyword} disabled"
