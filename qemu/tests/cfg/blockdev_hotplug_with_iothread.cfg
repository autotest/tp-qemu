# Storage backends:
#   filesystem
# The following testing scenario is covered:
#   Hotplug an image(backing: image1) with iothread set


- blockdev_hotplug_with_iothread:
    only Host_RHEL
    only filesystem
    only virtio_blk, virtio_scsi
    no Host_RHEL.m5, Host_RHEL.m6
    virt_test_type = qemu
    type = blockdev_hotplug_with_iothread
    qemu_force_use_drive_expression = no
    start_vm = no
    tempfile_size = 50M
    storage_pools = default
    storage_pool = default
    storage_type_default = "directory"
    error_msg = '{pid} Aborted|(core dumped)'

    source_images = image1
    hotplug_image = full
    image_format_full = qcow2
    backing_full = image1
    image_format_full = qcow2
    image_name_full = images/full

    iothreads = iothread0
    virtio_blk:
        blk_extra_params_image1 = iothread=iothread0
    virtio_scsi:
        no Host_RHEL.m7.u0, Host_RHEL.m7.u1, Host_RHEL.m7.u2
        bus_extra_params_image1 = iothread=iothread0
